<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–º–µ–π–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        .chart-container {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .chart-wrapper {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .no-data {
            text-align: center;
            color: #666;
            padding: 20px;
            font-style: italic;
        }
        
        .savings-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .savings-actions input {
            flex: 1;
            padding: 8px;
        }
        
        .savings-actions button {
            padding: 8px 12px;
        }
        
        .savings-tab {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .tab-btn {
            flex: 1;
            padding: 8px;
            background: #f0f0f0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .tab-btn.active {
            background: #4CAF50;
            color: white;
        }
        
        .savings-settings {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å —Ñ–æ—Ä–º–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π -->
            <div class="left-column">
                <h1>–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–º–µ–π–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞</h1>
                
                <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π -->
                <div class="form-container">
                    <form method="POST" action="/add_transaction" id="transaction-form">
                        <div class="form-group">
                            <label for="income">–î–æ—Ö–æ–¥:</label>
                            <input type="number" id="income" name="income" step="0.01" placeholder="0.00">
                        </div>
                        
                        <div class="form-group">
                            <label for="expense">–†–∞—Å—Ö–æ–¥:</label>
                            <input type="number" id="expense" name="expense" step="0.01" placeholder="0.00">
                        </div>
                        
                        <div class="form-group">
                            <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                            <select id="category" name="category">
                                <option value="products">–ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è</option>
                                <option value="food_restaurants">–ö–∞—Ñ–µ/—Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã</option>
                                <option value="pharmacy">–ê–ø—Ç–µ–∫–∞/–º–µ–¥–∏—Ü–∏–Ω–∞</option>
                                <option value="pets">–ü–∏—Ç–æ–º—Ü—ã/–≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∫–∞</option>
                                <option value="transport">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç/–¢–°</option>
                                <option value="travel">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è/–æ—Ç–¥—ã—Ö</option>
                                <option value="marketplace">–û–Ω–ª–∞–π–Ω-–ø–æ–∫—É–ø–∫–∏</option>
                                <option value="leisure">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è/–¥–æ—Å—É–≥</option>
                                <option value="utilities">–ñ–ö–£/—Å–≤—è–∑—å</option>
                                <option value="savings">–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è</option>
                                <option value="other">–ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã</option>
                            </select>
                        </div>
                        
                        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</button>
                    </form>
                </div>

                <!-- –ë–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                <div class="stats-container">
                    <h2>–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–≤–æ–¥–∫–∞</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>–û–±—â–∏–π –¥–æ—Ö–æ–¥</h3>
                            <p>{{ "%.2f"|format(total_income) }} ‚ÇΩ</p>
                        </div>
                        <div class="stat-card">
                            <h3>–û–±—â–∏–π —Ä–∞—Å—Ö–æ–¥</h3>
                            <p>{{ "%.2f"|format(total_expense) }} ‚ÇΩ</p>
                        </div>
                        <div class="stat-card">
                            <h3>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</h3>
                            <p>{{ "%.2f"|format(balance) }} ‚ÇΩ</p>
                        </div>
                    </div>
                </div>

                <!-- –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ -->
                <div class="chart-container">
                    <h2>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                    <div class="chart-wrapper">
                        <canvas id="expenseChart"></canvas>
                    </div>
                </div>
                
                <!-- –ë–ª–æ–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π -->
                <div class="savings-card">
                    <h3>–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è</h3>
                    <div class="savings-progress">
                        <div class="progress-bar" style="width: {{ savings_percentage }}%"></div>
                    </div>
                    <p>–û—Ç–ª–æ–∂–µ–Ω–æ: {{ "%.2f"|format(savings_amount) }} ‚ÇΩ –∏–∑ {{ "%.2f"|format(savings_goal) }} ‚ÇΩ</p>
                    
                    <div class="savings-tab">
                        <button class="tab-btn active" data-tab="add">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
                        <button class="tab-btn" data-tab="withdraw">–°–Ω—è—Ç—å</button>
                        <button class="tab-btn" data-tab="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                    
                    <div id="add-tab" class="tab-content active">
                        <form method="POST" action="/add_savings">
                            <input type="hidden" name="operation_type" value="expense">
                            <div class="savings-actions">
                                <input type="number" name="amount" step="100" placeholder="–°—É–º–º–∞" required>
                                <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
                            </div>
                        </form>
                    </div>
                    
                    <div id="withdraw-tab" class="tab-content">
                        <form method="POST" action="/add_savings">
                            <input type="hidden" name="operation_type" value="income">
                            <div class="savings-actions">
                                <input type="number" name="amount" step="100" placeholder="–°—É–º–º–∞" required>
                                <button type="submit">–°–Ω—è—Ç—å</button>
                            </div>
                        </form>
                    </div>
                    
                    <div id="settings-tab" class="tab-content">
                        <div class="savings-settings">
                            <form method="POST" action="/update_savings_goal">
                                <div class="savings-actions">
                                    <input type="number" name="goal" step="1000" placeholder="–ù–æ–≤–∞—è —Ü–µ–ª—å" value="{{ savings_goal }}" required>
                                    <button type="submit">–û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –æ–ø–µ—Ä–∞—Ü–∏–π -->
            <div class="right-column">
                <div class="transactions-container">
                    <h2>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
                    {% if transactions %}
                    <table>
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞</th>
                                <th>–û–ø–µ—Ä–∞—Ü–∏—è</th>
                                <th>–°—É–º–º–∞</th>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for transaction in transactions %}
                            <tr>
                                <td>{{ transaction['date'].split(' ')[0] }}</td>
                                <td>
                                    {% if transaction['income'] > 0 %}
                                        {% if transaction['category'] == 'savings' %}
                                        –°–Ω—è—Ç–∏–µ —Å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
                                        {% else %}
                                        –î–æ—Ö–æ–¥
                                        {% endif %}
                                    {% else %}
                                        {% if transaction['category'] == 'savings' %}
                                        –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
                                        {% else %}
                                        –†–∞—Å—Ö–æ–¥
                                        {% endif %}
                                    {% endif %}
                                </td>
                                <td class="{{ 'income' if transaction['income'] > 0 else 'expense' }}">
                                    {{ "%.2f"|format(transaction['income'] if transaction['income'] > 0 else transaction['expense']) }} ‚ÇΩ
                                </td>
                                <td>
                                    {% if transaction['category'] == 'products' %}–ü—Ä–æ–¥—É–∫—Ç—ã
                                    {% elif transaction['category'] == 'food_restaurants' %}–ö–∞—Ñ–µ
                                    {% elif transaction['category'] == 'pharmacy' %}–ê–ø—Ç–µ–∫–∞
                                    {% elif transaction['category'] == 'pets' %}–ü–∏—Ç–æ–º—Ü—ã
                                    {% elif transaction['category'] == 'transport' %}–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
                                    {% elif transaction['category'] == 'travel' %}–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
                                    {% elif transaction['category'] == 'marketplace' %}–û–Ω–ª–∞–π–Ω-–ø–æ–∫—É–ø–∫–∏
                                    {% elif transaction['category'] == 'leisure' %}–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
                                    {% elif transaction['category'] == 'utilities' %}–ñ–ö–£
                                    {% elif transaction['category'] == 'savings' %}–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è
                                    {% else %}–ü—Ä–æ—á–∏–µ
                                    {% endif %}
                                </td>
                                <td class="actions">
                                    <a href="{{ url_for('edit_transaction', id=transaction['id']) }}" class="edit-btn">‚úèÔ∏è</a>
                                    <a href="{{ url_for('delete_transaction', id=transaction['id']) }}" class="delete-btn" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –æ–ø–µ—Ä–∞—Ü–∏—é?')">üóëÔ∏è</a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é!</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–µ
                    this.classList.add('active');
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ç–∞–±—ã
                    document.querySelectorAll('.tab-content').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —Ç–∞–±
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId + '-tab').classList.add('active');
                });
            });
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π - —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
            const transactionForm = document.getElementById('transaction-form');
            if (transactionForm) {
                transactionForm.addEventListener('submit', function(e) {
                    const income = parseFloat(document.getElementById('income').value) || 0;
                    const expense = parseFloat(document.getElementById('expense').value) || 0;
                    
                    if (income === 0 && expense === 0) {
                        e.preventDefault();
                        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–æ—Ö–æ–¥–∞ –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥–∞.');
                    }
                });
            }
            
            const ctx = document.getElementById('expenseChart');
            
            if (!ctx) {
                console.error('–≠–ª–µ–º–µ–Ω—Ç –¥–∏–∞–≥—Ä–∞–º–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return;
            }
            
            const amounts = {{ amounts|tojson|safe }};
            const hasData = amounts && amounts.length > 0 && amounts.some(amount => amount > 0);
            
            if (!hasData) {
                const container = document.querySelector('.chart-wrapper');
                if (container) {
                    container.innerHTML = '<p class="no-data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã</p>';
                }
                return;
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–∞
            function lightenColor(color, percent) {
                const num = parseInt(color.replace('#', ''), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) + amt;
                const G = (num >> 8 & 0x00FF) + amt;
                const B = (num & 0x0000FF) + amt;
                
                return '#' + (
                    0x1000000 +
                    (R < 255 ? (R < 1 ? 0 : R) : 255) * 0x10000 +
                    (G < 255 ? (G < 1 ? 0 : G) : 255) * 0x100 +
                    (B < 255 ? (B < 1 ? 0 : B) : 255)
                ).toString(16).slice(1);
            }

            // –Ø—Ä–∫–∏–µ –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –±–æ–ª—å—à–∏–º —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ–º
            const baseColors = [
                '#FF1744', // –ü—Ä–æ–¥—É–∫—Ç—ã (—è—Ä–∫–æ-–∫—Ä–∞—Å–Ω—ã–π)
                '#2979FF', // –ö–∞—Ñ–µ (–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π —Å–∏–Ω–∏–π)
                '#FFEA00', // –ê–ø—Ç–µ–∫–∞ (—è—Ä–∫–∏–π –∂–µ–ª—Ç—ã–π)
                '#00E676', // –ü–∏—Ç–æ–º—Ü—ã (—è—Ä–∫–∏–π –∑–µ–ª–µ–Ω—ã–π)
                '#D500F9', // –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (—è—Ä–∫–∏–π —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
                '#FF9100', // –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è (–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –æ—Ä–∞–Ω–∂–µ–≤—ã–π)
                '#00B0FF', // –û–Ω–ª–∞–π–Ω-–ø–æ–∫—É–ø–∫–∏ (–≥–æ–ª—É–±–æ–π)
                '#F50057', // –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è (—Ñ—É–∫—Å–∏—è)
                '#651FFF', // –ñ–ö–£ (–∏–Ω–¥–∏–≥–æ)
                '#00C853', // –ù–∞–∫–æ–ø–ª–µ–Ω–∏—è (–∏–∑—É–º—Ä—É–¥–Ω—ã–π)
                '#FF3D00'  // –ü—Ä–æ—á–∏–µ (–∞–ª—ã–π)
            ];

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ–ª–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã—Ö –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
            function createGradients(chartContext, colors) {
                const gradients = [];
                const width = 200;
                const height = 200;
                
                colors.forEach(color => {
                    const gradient = chartContext.createLinearGradient(0, 0, width, height);
                    gradient.addColorStop(0, color);
                    gradient.addColorStop(0.5, lightenColor(color, 20)); // –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–∫–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
                    gradient.addColorStop(1, lightenColor(color, 40));   // –ë–æ–ª–µ–µ —è—Ä–∫–∏–π –∫–æ–Ω–µ—á–Ω—ã–π —Ü–≤–µ—Ç
                    gradients.push(gradient);
                });
                
                return gradients;
            }

            // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã
            const backgroundColors = createGradients(ctx.getContext('2d'), baseColors);
            
            try {
                new Chart(ctx.getContext('2d'), {
                    type: 'pie',
                    data: {
                        labels: {{ categories|tojson|safe }},
                        datasets: [{
                            data: amounts,
                            backgroundColor: backgroundColors.slice(0, amounts.length),
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    boxWidth: 16,
                                    padding: 16,
                                    font: {
                                        size: 12,
                                        weight: 'bold' // –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
                                    },
                                    usePointStyle: true,
                                    generateLabels: function(chart) {
                                        const data = chart.data;
                                        return data.labels.map((label, i) => ({
                                            text: label.length > 15 ? label.substring(0, 12) + '...' : label,
                                            fillStyle: baseColors[i], // –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –ª–µ–≥–µ–Ω–¥—ã
                                            strokeStyle: '#ffffff', // –ë–µ–ª–∞—è –æ–±–≤–æ–¥–∫–∞ –ª–µ–≥–µ–Ω–¥—ã
                                            lineWidth: 2, // –¢–æ–ª—â–∏–Ω–∞ –æ–±–≤–æ–¥–∫–∏
                                            fontColor: '#333',
                                            hidden: false,
                                            index: i
                                        }));
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.formattedValue || '';
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((context.raw / total) * 100);
                                        return `${label}: ${value} ‚ÇΩ (${percentage}%)`;
                                    }
                                }
                            }
                        },
                        animation: {
                            animateScale: true,
                            animateRotate: true,
                            duration: 1500 // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
                        },
                        cutout: '55%', // –ù–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–∞–µ–º –≤—ã—Ä–µ–∑ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ–ª—Å—Ç–æ–≥–æ –ø–∏—Ä–æ–≥–∞
                        elements: {
                            arc: {
                                borderWidth: 3, // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –±–æ–ª—å—à–µ–π –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                                borderColor: '#ffffff' // –ë–µ–ª—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã —Å–µ–∫—Ç–æ—Ä–æ–≤
                            }
                        }
                    }
                });
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã:', e);
                document.querySelector('.chart-wrapper').innerHTML = 
                    '<p class="no-data">–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã</p>';
            }
        });
    </script>
</body>
</html>